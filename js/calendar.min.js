const calendarArea=document.getElementById("calendar"),monthLongLabels=["January","February","March","April","May","June","July","August","September","October","November","December"],monthShortLabels=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"],dayOfWeekLabels=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],today=new Date,todayDay=today.getDate(),todayMonth=today.getMonth(),todayYear=today.getFullYear();var currentDay=new Date,dd=currentDay.getDate(),mm=currentDay.getMonth()+1,yyyy=currentDay.getFullYear(),currentDayYear=currentDay.getFullYear(),currentDayMonth=currentDay.getMonth(),currentDayDay=currentDay.getDate(),currentDayMonthWord=monthLongLabels[currentDayMonth],currentView;function showView(){"year"==currentView?showYearView():"month"==currentView?showMonthView():"week"==currentView?showWeekView():"day"==currentView&&showDayView();try{GenerateItems()}catch(error){}}function showYearView(){calendarArea.innerHTML=createYearSkelaton()}function showMonthView(){calendarArea.innerHTML=createMonthSkelaton()}function showWeekView(){calendarArea.innerHTML=createWeekSkelaton()}function showDayView(){calendarArea.innerHTML=createDaySkelaton()}function createYearSkelaton(){let html=`    \n    <table class="view-year">\n      <tr>\n        <th class="year-previous">\n          <button id="year-previous"><</button>\n        </th>\n        <th id="year">${currentDayYear}</th>\n        <th class="year-next">\n          <button id="year-next">></button>\n        </th>\n      </tr>\n    </table>\n    <table class="view-year">\n      <tr>\n        <td>\n  `,monthOfYear=0;return monthShortLabels.forEach(function(monthLabel){html+=monthOfYear%2==0?'\n        <div class="odd-month">\n      ':'\n        <div class="even-month">\n      ',html+=monthOfYear==currentDayMonth&&todayYear==currentDayYear?'\n        <div class="this-month-label">\n      ':'\n        <div class="month-label">\n      ',html+=`\n          ${monthLabel}\n        </div>\n      </div>\n    `,monthOfYear++}),html+="\n        </td>\n      </tr>\n    </table>\n  ",html+="</table>"}function createMonthSkelaton(){updateShortDates();let html=`\n      <table class="view-month">\n        <tr>\n          <th class="year-previous">\n            <button id="year-previous"><</button>\n          </th>\n          <th id="year">\n            ${currentDayYear}\n          </th>\n          <th class="year-next">\n            <button id="year-next">></button>\n          </th>\n        </tr>\n        <tr>\n          <th class="month-previous">\n            <button id="month-previous"><</button>\n          </th>\n          <th id="month">\n            ${currentDayMonthWord}\n          </th>\n          <td class="month-next">\n            <button id="month-next">></button>\n          </td>\n        </tr>\n      </table>\n      <table class="view-month">\n        <tr>\n    `;dayOfWeekLabels.forEach(function(dayLabel){html+=`\n        <td class="day-of-week-label">${dayLabel}</td>\n      `}),html+="</tr>";let dayOfMonth=1-new Date(currentDayYear+"-"+currentDayMonthWord+"-01").getDay(),daysInMonth=calcDaysInMonth(currentDayYear,currentDayMonth+1),numWeeksToPrint=0;numWeeksToPrint=28==daysInMonth&&1==dayOfMonth?4:31==daysInMonth&&dayOfMonth>=-3||30==daysInMonth&&dayOfMonth>=-4||29==daysInMonth&&dayOfMonth>=-5||28==daysInMonth&&dayOfMonth>=-6?5:6;for(let week=1;week<=numWeeksToPrint;week++){html+="<tr>";for(let dayOfWeek=1;dayOfWeek<=7;dayOfWeek++)dayOfMonth>0&&dayOfMonth<=daysInMonth?(html+=dayOfMonth%2==1?'\n            <td class="odd-day">\n          ':'\n            <td class="even-day">\n          ',html+=dayOfMonth==currentDayDay&&currentDayMonth==todayMonth&&currentDayYear==todayYear?`\n                <div class="to-day-label">${dayOfMonth++}</div>\n              \n            `:`\n              <div class="day-label">${dayOfMonth++}</div>\n            \n          `):(html+='<td class="blank-day">',dayOfMonth++);html+="</td></tr>"}return html+="</table>"}function createWeekSkelaton(){let html='<table class="view-week">';return dayOfWeekLabels.forEach(function(dayLabel){html+=`\n        <tr>\n          <th class="day-of-week-label">${dayLabel}</th>\n          <td></td>\n        </tr>\n      `}),html+="</table>"}function createDaySkelaton(){let html;return'\n      <table class="view-day">\n        <tr>\n          <th>Date</th>\n        </tr>\n        <tr>\n          <td>\n          \n          </td>\n        </tr>\n      </table>\n    '}function updateShortDates(){dd=currentDay.getDate(),mm=currentDay.getMonth()+1,yyyy=currentDay.getFullYear()}function calcDaysInMonth(y,m){return new Date(y,m,0).getDate()}currentView=account.settings.defaultView,showView(),$(document).on("click","#year-previous",function(e){e.preventDefault(),currentDayYear--,showView()}),$(document).on("click","#year-next",function(e){e.preventDefault(),currentDayYear++,showView()}),$(document).on("click","#month-previous",function(e){e.preventDefault(),0==currentDayMonth?(currentDayMonthWord=monthLongLabels[currentDayMonth=11],currentDayYear--):currentDayMonthWord=monthLongLabels[--currentDayMonth],showView()}),$(document).on("click","#month-next",function(e){e.preventDefault(),11==currentDayMonth?(currentDayMonthWord=monthLongLabels[currentDayMonth=0],currentDayYear++):currentDayMonthWord=monthLongLabels[++currentDayMonth],showView()});